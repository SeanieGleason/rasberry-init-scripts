version: '3.8'
services:
  dreampi:
    # Build the image using the Dockerfile in the current directory
    build:
      context: .
    image: dreampi-standalone:latest
    container_name: dreampi

    # HIGHLY IMPORTANT: Grant privileges for network (PPP) and device access
    privileged: true

    # Use host network mode for easier PPP setup
    network_mode: "host"

    # Map the modem device from the host into the container, naming it /dev/modem
    # as referenced in the dreampi-ppp file.
    # !!! YOU MUST CHANGE /dev/ttyACM0 to match your actual modem device path on the host. !!!
    devices:
      - /dev/ttyACM0:/dev/modem

    restart: unless-stopped